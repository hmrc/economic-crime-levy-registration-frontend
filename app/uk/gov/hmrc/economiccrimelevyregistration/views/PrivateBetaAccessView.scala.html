@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.economiccrimelevyregistration.config.AppConfig
@import uk.gov.hmrc.economiccrimelevyregistration.viewmodels.InputWidth._

@this(
        layout: uk.gov.hmrc.economiccrimelevyregistration.views.html.templates.Layout,
        formHelper: FormWithCSRF,
        govukErrorSummary: GovukErrorSummary,
        govukInput: GovukInput,
        govukButton: GovukButton,
        govukWarningText: GovukWarningText,
        govukInsetText: GovukInsetText,
        govukDetails: GovukDetails,
        appConfig: AppConfig
)

@(form: Form[String], continueUrl: String)(implicit request: Request[_], messages: Messages)

@formLabel = {
    <h2 class="govuk-heading-s"> <svg class="svg-icon" width="15px" viewBox="0 0 10 13" xmlns="http://www.w3.org/2000/svg" focusable="false">
        <path d="M12.25,6h-.72V4.49a3.5,3.5,0,0,0-7,0V6H3.75A.77.77,0,0,0,3,6.75v6.5a.77.77,0,0,0,.75.75h8.5a.77.77,0,0,0,.75-.75V6.75A.77.77,0,0,0,12.25,6ZM5.54,4.49a2.5,2.5,0,1,1,5,0V6h-5ZM9,11.66a.3.3,0,0,1-.26.34H7.29A.29.29,0,0,1,7,11.69v0l.39-1.82a1,1,0,1,1,1.4-.18.77.77,0,0,1-.18.18Z" transform="translate(-3 -0.99)"></path>
    </svg> &nbsp; @messages("privateBetaAccess.enterYourCode")</h2>
}

@formInput = {
@govukInput(
    InputViewModel(
        field = form("value"),
        label = LabelViewModel(HtmlContent(formLabel))
    ).withWidth(Fixed20).withHint(Hint(content = Text(messages("privateBetaAccess.keepSafe"))))
)
}

@codeDoesNotWork = {
    <strong>@messages("privateBetaAccess.codeDoesNotWork")</strong>
}

@codeDoesNotWorkDetails = {
    <p class="govuk-body">@Html(messages("privateBetaAccess.codeDoesNotWork.contact", appConfig.privateBetaContactEmail))</p>
    <ul class="govuk-list govuk-list--bullet">
        <li>@messages("privateBetaAccess.codeDoesNotWork.b1")</li>
        <li>@messages("privateBetaAccess.codeDoesNotWork.b2")</li>
        <li>@messages("privateBetaAccess.codeDoesNotWork.b3")</li>
    </ul>
}

@layout(pageTitle = titleWithForm(form, messages("privateBetaAccess.title"))) {
    @if(form.errors.nonEmpty) {
        @govukErrorSummary(ErrorSummaryViewModel(form))
    }

    <h1 class="govuk-heading-l">@messages("privateBetaAccess.heading")</h1>
    <p class="govuk-body">@messages("privateBetaAccess.p1")</p>
    <p class="govuk-body">@messages("privateBetaAccess.p2")</p>
    <p class="govuk-body">@messages("privateBetaAccess.p3")</p>

    <h1 class="govuk-heading-m">@messages("privateBetaAccess.getAccessCode")</h1>
    <p class="govuk-body">@Html(messages("privateBetaAccess.registerInterest", appConfig.privateBetaContactEmail))</p>
    <p class="govuk-body">@messages("privateBetaAccess.emailSubject")</p>

    @govukWarningText(WarningText(
        iconFallbackText = messages("site.warningIconFallback"),
        content = Text(messages("privateBetaAccess.doNotContact"))
    ))

    <h1 class="govuk-heading-m">@messages("privateBetaAccess.enterAccessCode")</h1>
    <p class="govuk-body">@messages("privateBetaAccess.toRegister")</p>

    @formHelper(action = PrivateBetaAccessController.onSubmit(continueUrl)) {
        @govukInsetText(InsetText(
            content = HtmlContent(formInput)
        ))

        @govukDetails(Details(
            summary = HtmlContent(messages("privateBetaAccess.codeDoesNotWork")),
            content = HtmlContent(codeDoesNotWorkDetails)
        ))

        @govukButton(
            ButtonViewModel(messages("site.continue"))
        )
    }
}
